# p-locate [![Build Status](https://travis-ci.org/sindresorhus/p-locate.svg?branch=master)](https://travis-ci.org/sindresorhus/p-locate)

> Get the first fulfilled promise that satisfies the provided testing function

Think of it like an async version of [`Array#find`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/find).


## Install

```
<<<<<<< HEAD
$ npm install --save p-locate
=======
$ npm install p-locate
>>>>>>> 2b75b16416ca8fc833a5f051a52ef6327402014f
```


## Usage

Here we find the first file that exists on disk, in array order.

```js
const pathExists = require('path-exists');
const pLocate = require('p-locate');

const files = [
	'unicorn.png',
<<<<<<< HEAD
	'rainbow.png', // only this one actually exists on disk
	'pony.png'
];

pLocate(files, file => pathExists(file)).then(foundPath => {
	console.log(foundPath);
	//=> 'rainbow'
});
=======
	'rainbow.png', // Only this one actually exists on disk
	'pony.png'
];

(async () => {
	const foundPath = await pLocate(files, file => pathExists(file));

	console.log(foundPath);
	//=> 'rainbow'
})();
>>>>>>> 2b75b16416ca8fc833a5f051a52ef6327402014f
```

*The above is just an example. Use [`locate-path`](https://github.com/sindresorhus/locate-path) if you need this.*


## API

### pLocate(input, tester, [options])

Returns a `Promise` that is fulfilled when `tester` resolves to `true` or the iterable is done, or rejects if any of the promises reject. The fulfilled value is the current iterable value or `undefined` if `tester` never resolved to `true`.

#### input

<<<<<<< HEAD
Type: `Iterable<Promise|any>`
=======
Type: `Iterable<Promise | unknown>`

An iterable of promises/values to test.
>>>>>>> 2b75b16416ca8fc833a5f051a52ef6327402014f

#### tester(element)

Type: `Function`

<<<<<<< HEAD
Expected to return a `Promise<boolean>` or boolean.
=======
This function will receive resolved values from `input` and is expected to return a `Promise<boolean>` or `boolean`.
>>>>>>> 2b75b16416ca8fc833a5f051a52ef6327402014f

#### options

Type: `Object`

##### concurrency

Type: `number`<br>
Default: `Infinity`<br>
Minimum: `1`

Number of concurrently pending promises returned by `tester`.

##### preserveOrder

Type: `boolean`<br>
Default: `true`

Preserve `input` order when searching.

Disable this to improve performance if you don't care about the order.


## Related

- [p-map](https://github.com/sindresorhus/p-map) - Map over promises concurrently
- [p-filter](https://github.com/sindresorhus/p-filter) - Filter promises concurrently
- [p-any](https://github.com/sindresorhus/p-any) - Wait for any promise to be fulfilled
- [More…](https://github.com/sindresorhus/promise-fun)


## License

MIT © [Sindre Sorhus](https://sindresorhus.com)
